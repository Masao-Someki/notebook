import{_ as l,r as o,o as t,c as i,a as s,b as a,d as n,e as p}from"./app-FOR18dDf.js";const r={},c=s("h1",{id:"cmu-11492-11692-spring-2023-data-preparation",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#cmu-11492-11692-spring-2023-data-preparation"},[s("span",null,"CMU 11492/11692 Spring 2023: Data preparation")])],-1),d=s("p",null,"In this demonstration, we will show you the procedure to prepare the data for speech processing (ASR as an example).",-1),u=s("p",null,"Main references:",-1),h={href:"https://github.com/espnet/espnet",target:"_blank",rel:"noopener noreferrer"},D={href:"https://espnet.github.io/espnet/",target:"_blank",rel:"noopener noreferrer"},m={href:"https://colab.research.google.com/github/espnet/notebook/blob/master/espnet2_tutorial_2021_CMU_11751_18781.ipynb",target:"_blank",rel:"noopener noreferrer"},y={href:"https://colab.research.google.com/drive/1tY6PxF_M5Nx5n488x0DrpujJOyqW-ATi?usp=sharing",target:"_blank",rel:"noopener noreferrer"},v={href:"https://colab.research.google.com/github/espnet/notebook/blob/master/espnet2_recipe_tutorial_CMU_11751_18781_Fall2022.ipynb",target:"_blank",rel:"noopener noreferrer"},b=p(`<p>Author:</p><ul><li>Jiatong Shi (jiatongs@andrew.cmu.edu)</li></ul><h2 id="objectives" tabindex="-1"><a class="header-anchor" href="#objectives"><span>Objectives</span></a></h2><p>After this demonstration, you are expected to know:</p><ul><li>Understand the Kaldi(ESPnet) data format</li></ul><h2 id="useful-links" tabindex="-1"><a class="header-anchor" href="#useful-links"><span>Useful links</span></a></h2><ul><li>Installation https://espnet.github.io/espnet/installation.html</li><li>Kaldi Data format https://kaldi-asr.org/doc/data_prep.html</li><li>ESPnet data format https://github.com/espnet/espnet/tree/master/egs2/TEMPLATE#about-kaldi-style-data-directory</li></ul><h2 id="download-espnet" tabindex="-1"><a class="header-anchor" href="#download-espnet"><span>Download ESPnet</span></a></h2><p>We use <code>git clone</code> to download the source code of ESPnet and then go to a specific commit.</p><div class="language-python line-numbers-mode" data-ext="py" data-title="py"><pre class="shiki dark-plus" style="background-color:#1E1E1E;color:#D4D4D4;" tabindex="0"><code><span class="line"><span style="color:#6A9955;"># It takes a few seconds</span></span>
<span class="line"><span style="color:#F44747;">!</span><span style="color:#D4D4D4;">git clone </span><span style="color:#F44747;">--</span><span style="color:#D4D4D4;">depth </span><span style="color:#B5CEA8;">5</span><span style="color:#D4D4D4;"> https://github.com/espnet/espnet</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A9955;"># We use a specific commit just for reproducibility.</span></span>
<span class="line"><span style="color:#D4D4D4;">%cd /content/espnet</span></span>
<span class="line"><span style="color:#F44747;">!</span><span style="color:#D4D4D4;">git checkout </span><span style="color:#F44747;">3970558fbbe38d7b7e9922b08a9aa249390d4fb7</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="setup-python-environment-based-on-anaconda" tabindex="-1"><a class="header-anchor" href="#setup-python-environment-based-on-anaconda"><span>Setup Python environment based on anaconda</span></a></h2><p>There are several other installation methods, but <strong>we highly recommend the anaconda-based one</strong>. In this demonstration, we will only need to have the python environment (no need to install the full espnet). But installation of ESPnet main codebase will be necessary for for training/inference/scoring.</p><div class="language-python line-numbers-mode" data-ext="py" data-title="py"><pre class="shiki dark-plus" style="background-color:#1E1E1E;color:#D4D4D4;" tabindex="0"><code><span class="line"><span style="color:#6A9955;"># It takes 30 seconds</span></span>
<span class="line"><span style="color:#D4D4D4;">%cd /content/espnet/tools</span></span>
<span class="line"><span style="color:#D4D4D4;">!./setup_anaconda.sh anaconda espnet </span><span style="color:#B5CEA8;">3.9</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D4D4D4;">!./installers/install_sph2pipe.sh</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>We will also install some essential python libraries (these will be auto-matically downloaded during espnet installation. However, today, we won&#39;t go through that part, so we need to mannually install the packages.</p><div class="language-python line-numbers-mode" data-ext="py" data-title="py"><pre class="shiki dark-plus" style="background-color:#1E1E1E;color:#D4D4D4;" tabindex="0"><code><span class="line"><span style="color:#F44747;">!</span><span style="color:#D4D4D4;">pip install kaldiio soundfile tqdm librosa matplotlib IPython</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>We will also need Kaldi for some essential scripts.</p><div class="language-python line-numbers-mode" data-ext="py" data-title="py"><pre class="shiki dark-plus" style="background-color:#1E1E1E;color:#D4D4D4;" tabindex="0"><code><span class="line"><span style="color:#F44747;">!</span><span style="color:#D4D4D4;">git clone https://github.com/kaldi-asr/kaldi.git</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h1 id="data-preparation-in-espnet" tabindex="-1"><a class="header-anchor" href="#data-preparation-in-espnet"><span>Data preparation in ESPnet</span></a></h1><p>ESPnet has a number of recipes (146 recipes on Jan. 23, 2023). One of the most important steps for those recipes is the preparation of the data. Constructing in different scenarios, spoken corpora need to be converted into a unified format. In ESPnet, we follow and adapt the Kaldi data format for various tasks.</p><p>In this demonstration, we will focus on a specific recipe <code>an4</code> as an example.</p><p>Other materials:</p><ul><li>Kaldi format documentation can be found in https://kaldi-asr.org/doc/data_prep.html</li><li>ESPnet data format is in https://github.com/espnet/espnet/tree/master/egs2/TEMPLATE#about-kaldi-style-data-directory</li><li>Please refer to https://github.com/espnet/espnet/blob/master/egs2/README.md for a complete list of recipes.</li><li>Please also check the general usage of the recipe in https://espnet.github.io/espnet/espnet2_tutorial.html#recipes-using-espnet2</li></ul><h2 id="data-preparation-for-an4" tabindex="-1"><a class="header-anchor" href="#data-preparation-for-an4"><span>Data preparation for AN4</span></a></h2><p>All the data preparation in ESPnet2 happens in <code>egs2/recipe_name/task/local/data.sh</code> where the task can be either <code>asr1</code>, <code>enh1</code>, <code>tts1</code>, etc.</p><p><strong>CMU AN4 recipe</strong></p><p>In this demonstration, we will use the CMU <code>an4</code> recipe. This is a small-scale speech recognition task mainly used for testing.</p><p>First, let&#39;s go to the recipe directory.</p><div class="language-python line-numbers-mode" data-ext="py" data-title="py"><pre class="shiki dark-plus" style="background-color:#1E1E1E;color:#D4D4D4;" tabindex="0"><code><span class="line"><span style="color:#D4D4D4;">%cd /content/espnet/egs2/an4/asr1</span></span>
<span class="line"><span style="color:#F44747;">!</span><span style="color:#D4D4D4;">ls</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="shiki dark-plus" style="background-color:#1E1E1E;color:#D4D4D4;" tabindex="0"><code><span class="line"><span>egs2/an4/asr1/</span></span>
<span class="line"><span> - conf/      # Configuration files for training, inference, etc.</span></span>
<span class="line"><span> - scripts/   # Bash utilities of espnet2</span></span>
<span class="line"><span> - pyscripts/ # Python utilities of espnet2</span></span>
<span class="line"><span> - steps/     # From Kaldi utilities</span></span>
<span class="line"><span> - utils/     # From Kaldi utilities</span></span>
<span class="line"><span> - local/     # Some local scripts for specific recipes (Data Preparation usually in \`local/data.sh\`)</span></span>
<span class="line"><span> - db.sh      # The directory path of each corpora</span></span>
<span class="line"><span> - path.sh    # Setup script for environment variables</span></span>
<span class="line"><span> - cmd.sh     # Configuration for your backend of job scheduler</span></span>
<span class="line"><span> - run.sh     # Entry point</span></span>
<span class="line"><span> - asr.sh     # Invoked by run.sh</span></span>
<span class="line"><span></span></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-python line-numbers-mode" data-ext="py" data-title="py"><pre class="shiki dark-plus" style="background-color:#1E1E1E;color:#D4D4D4;" tabindex="0"><code><span class="line"><span style="color:#6A9955;"># a few seconds</span></span>
<span class="line"><span style="color:#D4D4D4;">!./local/data.sh</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>The orginal data usually in various format. AN4 has a quite straightforward format. You may dig into the folder <code>an4</code> to see the raw format. After this preparation is finished, all the information will be in the <code>data</code> directory:</p><div class="language-python line-numbers-mode" data-ext="py" data-title="py"><pre class="shiki dark-plus" style="background-color:#1E1E1E;color:#D4D4D4;" tabindex="0"><code><span class="line"><span style="color:#F44747;">!</span><span style="color:#D4D4D4;">ls data</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>In this recipe, we use <code>train_nodev</code> as a training set, <code>train_dev</code> as a validation set (monitor the training progress by checking the validation score). We also use <code>test</code> and <code>train_dev</code> sets for the final speech recognition evaluation.</p><p>Let&#39;s check one of the training data directories:</p><div class="language-python line-numbers-mode" data-ext="py" data-title="py"><pre class="shiki dark-plus" style="background-color:#1E1E1E;color:#D4D4D4;" tabindex="0"><code><span class="line"><span style="color:#F44747;">!</span><span style="color:#D4D4D4;">ls -</span><span style="color:#B5CEA8;">1</span><span style="color:#D4D4D4;"> data/train_nodev/</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>In short, the four files are:</p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="shiki dark-plus" style="background-color:#1E1E1E;color:#D4D4D4;" tabindex="0"><code><span class="line"><span>spk2utt # Speaker information</span></span>
<span class="line"><span>text    # Transcription file</span></span>
<span class="line"><span>utt2spk # Speaker information</span></span>
<span class="line"><span>wav.scp # Audio file</span></span>
<span class="line"><span></span></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>The <code>wav.scp</code> is the most important file that holds the speech data. For each line of the <code>wav.scp</code>, there are generally two components <code>WAV_ID</code> and <code>SPEECH_AUDIO</code> for each line of the file. The <code>WAV_ID</code> is an identifier for the utterance, while the <code>SPEECH_AUDIO</code> holds the speech audio data.</p><p>The audio data can be in various audio formats, such as <code>wav</code>, <code>flac</code>, <code>sph</code>, etc. We can also use pipe to normalize audio files with (e.g., <code>sox</code>, <code>ffmpeg</code>, <code>sph2pipe</code>). The following from an4 is an example using <code>sph2pipe</code>.</p><div class="language-python line-numbers-mode" data-ext="py" data-title="py"><pre class="shiki dark-plus" style="background-color:#1E1E1E;color:#D4D4D4;" tabindex="0"><code><span class="line"><span style="color:#F44747;">!</span><span style="color:#D4D4D4;">head -n </span><span style="color:#B5CEA8;">10</span><span style="color:#D4D4D4;"> data/train_nodev/wav.scp</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>The <code>text</code> is to hold the transription of the speech. Similar to <code>wav.scp</code>, for each line of <code>text</code>, there are <code>UTT_ID</code> and <code>TRANSCRIPTION</code>. Note that the <code>UTT_ID</code> in <code>text</code> and <code>WAV_ID</code> in <code>wav.scp</code> are not necessary the same. But for the simple case (e.g., the <code>AN4</code>), we regard them as the same. The example in <code>AN4</code> is as:</p><div class="language-python line-numbers-mode" data-ext="py" data-title="py"><pre class="shiki dark-plus" style="background-color:#1E1E1E;color:#D4D4D4;" tabindex="0"><code><span class="line"><span style="color:#F44747;">!</span><span style="color:#D4D4D4;">head -n </span><span style="color:#B5CEA8;">10</span><span style="color:#D4D4D4;"> data/train_nodev/text</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>The <code>spk2utt</code> and <code>utt2spk</code> are mapping between utterances and speakers. The information is widely used in conventional hidden Markov model (HMM)-based ASR systems, but not that popular in end-to-end ASR systems nowadays. However, they are still very important for tasks such as speaker diarization and multi-speaker text-to-speech. The examples of AN4 is as follows:</p><div class="language-python line-numbers-mode" data-ext="py" data-title="py"><pre class="shiki dark-plus" style="background-color:#1E1E1E;color:#D4D4D4;" tabindex="0"><code><span class="line"><span style="color:#F44747;">!</span><span style="color:#D4D4D4;">head -n </span><span style="color:#B5CEA8;">10</span><span style="color:#D4D4D4;"> data/train_nodev/spk2utt</span></span>
<span class="line"><span style="color:#F44747;">!</span><span style="color:#D4D4D4;">echo </span><span style="color:#CE9178;">&quot;--------------------------&quot;</span></span>
<span class="line"><span style="color:#F44747;">!</span><span style="color:#D4D4D4;">head -n </span><span style="color:#B5CEA8;">10</span><span style="color:#D4D4D4;"> data/train_nodev/utt2spk</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="how-to-read-file-in-pipe" tabindex="-1"><a class="header-anchor" href="#how-to-read-file-in-pipe"><span>How to read file in pipe</span></a></h2><p>We can use <code>kaldiio</code> package to read audio files from <code>wav.scp</code>. The example is as follows:</p><div class="language-python line-numbers-mode" data-ext="py" data-title="py"><pre class="shiki dark-plus" style="background-color:#1E1E1E;color:#D4D4D4;" tabindex="0"><code><span class="line"><span style="color:#C586C0;">import</span><span style="color:#D4D4D4;"> soundfile</span></span>
<span class="line"><span style="color:#C586C0;">import</span><span style="color:#D4D4D4;"> kaldiio</span></span>
<span class="line"><span style="color:#C586C0;">import</span><span style="color:#D4D4D4;"> matplotlib.pyplot </span><span style="color:#C586C0;">as</span><span style="color:#D4D4D4;"> plt</span></span>
<span class="line"><span style="color:#C586C0;">from</span><span style="color:#D4D4D4;"> io </span><span style="color:#C586C0;">import</span><span style="color:#D4D4D4;"> BytesIO</span></span>
<span class="line"><span style="color:#C586C0;">from</span><span style="color:#D4D4D4;"> tqdm </span><span style="color:#C586C0;">import</span><span style="color:#D4D4D4;"> tqdm</span></span>
<span class="line"><span style="color:#C586C0;">import</span><span style="color:#D4D4D4;"> librosa.display</span></span>
<span class="line"><span style="color:#C586C0;">import</span><span style="color:#D4D4D4;"> numpy </span><span style="color:#C586C0;">as</span><span style="color:#D4D4D4;"> np</span></span>
<span class="line"><span style="color:#C586C0;">import</span><span style="color:#D4D4D4;"> IPython.display </span><span style="color:#C586C0;">as</span><span style="color:#D4D4D4;"> ipd</span></span>
<span class="line"><span style="color:#C586C0;">import</span><span style="color:#D4D4D4;"> os</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D4D4D4;">os.environ[</span><span style="color:#CE9178;">&#39;PATH&#39;</span><span style="color:#D4D4D4;">] = os.environ[</span><span style="color:#CE9178;">&#39;PATH&#39;</span><span style="color:#D4D4D4;">] + </span><span style="color:#CE9178;">&quot;:/content/espnet/tools/sph2pipe&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D4D4D4;">wavscp = </span><span style="color:#DCDCAA;">open</span><span style="color:#D4D4D4;">(</span><span style="color:#CE9178;">&quot;data/test/wav.scp&quot;</span><span style="color:#D4D4D4;">, </span><span style="color:#CE9178;">&quot;r&quot;</span><span style="color:#D4D4D4;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D4D4D4;">num_wav = </span><span style="color:#B5CEA8;">5</span></span>
<span class="line"><span style="color:#D4D4D4;">count = </span><span style="color:#B5CEA8;">1</span></span>
<span class="line"><span style="color:#C586C0;">for</span><span style="color:#D4D4D4;"> line </span><span style="color:#C586C0;">in</span><span style="color:#D4D4D4;"> tqdm(wavscp):</span></span>
<span class="line"><span style="color:#D4D4D4;">  utt_id, wavpath = line.strip().split(</span><span style="color:#569CD6;">None</span><span style="color:#D4D4D4;">, </span><span style="color:#B5CEA8;">1</span><span style="color:#D4D4D4;">)</span></span>
<span class="line"><span style="color:#C586C0;">  with</span><span style="color:#D4D4D4;"> kaldiio.open_like_kaldi(wavpath, </span><span style="color:#CE9178;">&quot;rb&quot;</span><span style="color:#D4D4D4;">) </span><span style="color:#C586C0;">as</span><span style="color:#D4D4D4;"> f:</span></span>
<span class="line"><span style="color:#C586C0;">    with</span><span style="color:#D4D4D4;"> BytesIO(f.read()) </span><span style="color:#C586C0;">as</span><span style="color:#D4D4D4;"> g:</span></span>
<span class="line"><span style="color:#D4D4D4;">      wave, rate = soundfile.read(g, </span><span style="color:#9CDCFE;">dtype</span><span style="color:#D4D4D4;">=np.float32)</span></span>
<span class="line"><span style="color:#DCDCAA;">      print</span><span style="color:#D4D4D4;">(</span><span style="color:#CE9178;">&quot;audio: </span><span style="color:#569CD6;">{}</span><span style="color:#CE9178;">&quot;</span><span style="color:#D4D4D4;">.format(utt_id))</span></span>
<span class="line"><span style="color:#D4D4D4;">      librosa.display.waveshow(wave, rate)</span></span>
<span class="line"><span style="color:#D4D4D4;">      plt.show()</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D4D4D4;">      ipd.display(ipd.Audio(wave, </span><span style="color:#9CDCFE;">rate</span><span style="color:#D4D4D4;">=rate)) </span><span style="color:#6A9955;"># load a NumPy array</span></span>
<span class="line"><span style="color:#C586C0;">      if</span><span style="color:#D4D4D4;"> count == num_wav:</span></span>
<span class="line"><span style="color:#C586C0;">        break</span></span>
<span class="line"><span style="color:#D4D4D4;">      count += </span><span style="color:#B5CEA8;">1</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="data-preparation-for-totonac" tabindex="-1"><a class="header-anchor" href="#data-preparation-for-totonac"><span>Data preparation for TOTONAC</span></a></h2><p><strong>CMU TOTONAC recipe</strong></p><p>In the second part of the demonstration, we will use the CMU <code>totonac</code> recipe. This is a small-scale ASR recipe, which is an endangered language in central Mexico. We will follow mostly the similar procedure as the showcase of AN4. For the start, the recipe directory of <code>totonac</code> is almost the same as <code>an4</code>.</p><div class="language-python line-numbers-mode" data-ext="py" data-title="py"><pre class="shiki dark-plus" style="background-color:#1E1E1E;color:#D4D4D4;" tabindex="0"><code><span class="line"><span style="color:#D4D4D4;">%cd /content/espnet/egs2/totonac/asr1</span></span>
<span class="line"><span style="color:#F44747;">!</span><span style="color:#D4D4D4;">ls</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>Then we execute <code>./local/data.sh</code> for the data preparation, which is the same as <code>an4</code>. The downloading takes a longer time (around 2-3 mins) for <code>totonac</code> as the speech is in higher-sampling rate and recorded in a conversational manner which include longer session rather than single utterances.</p><div class="language-python line-numbers-mode" data-ext="py" data-title="py"><pre class="shiki dark-plus" style="background-color:#1E1E1E;color:#D4D4D4;" tabindex="0"><code><span class="line"><span style="color:#D4D4D4;">!. ../../../tools/activate_python.sh </span><span style="color:#F44747;">&amp;&amp;</span><span style="color:#D4D4D4;"> pip install soundfile </span><span style="color:#6A9955;"># we need soundfile for necessary processing</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D4D4D4;">!./local/data.sh</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Let&#39;s first check the original data format of the <code>totonac</code>. To facilate the linguists working on the language, we use the ELAN format, which is special XML format. For preparation, we need to parse the format into the same Kaldi format as mentioned ahead. For more details, please check https://github.com/espnet/espnet/blob/master/egs2/totonac/asr1/local/data_prep.py</p><div class="language-python line-numbers-mode" data-ext="py" data-title="py"><pre class="shiki dark-plus" style="background-color:#1E1E1E;color:#D4D4D4;" tabindex="0"><code><span class="line"><span style="color:#F44747;">!</span><span style="color:#D4D4D4;">ls -l downloads/Conversaciones/Botany/Transcripciones/ELAN-para-traducir | head -n </span><span style="color:#B5CEA8;">5</span></span>
<span class="line"><span style="color:#F44747;">!</span><span style="color:#D4D4D4;">echo </span><span style="color:#CE9178;">&quot;-----------------------------------------------&quot;</span></span>
<span class="line"><span style="color:#F44747;">!</span><span style="color:#D4D4D4;">cat downloads/Conversaciones/Botany/Transcripciones/ELAN-para-traducir/Zongo_Botan_ESP400-SLC388_Convolvulaceae-Cuscuta-sp_2019-</span><span style="color:#B5CEA8;">0</span><span style="color:#F44747;">9</span><span style="color:#D4D4D4;">-</span><span style="color:#B5CEA8;">25</span><span style="color:#D4D4D4;">-c_ed-</span><span style="color:#B5CEA8;">2020</span><span style="color:#D4D4D4;">-</span><span style="color:#B5CEA8;">12</span><span style="color:#D4D4D4;">-</span><span style="color:#B5CEA8;">30.</span><span style="color:#D4D4D4;">eaf</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Similar to <code>AN4</code>, we will have three sets for the experiments for <code>totonac</code>, including train, test and dev. However, within the set, we also have a <code>segments</code> file apart from the files mentioned above.</p><p>For each line of <code>segments</code>, we will have four fields for each line, including <code>UTT_ID</code>, <code>WAV_ID</code>, &quot;start time&quot; and &quot;end time&quot;. Note that when <code>segments</code> files are presented, the <code>WAV_ID</code> in <code>wav.scp</code> and <code>UTT_ID</code> in <code>text</code>, <code>utt2spk</code> and <code>spk2utt</code> are not the same anymore. And the <code>segments</code> is the file that keeps the relationship between <code>WAV_ID</code> and <code>UTT_ID</code>.</p><div class="language-python line-numbers-mode" data-ext="py" data-title="py"><pre class="shiki dark-plus" style="background-color:#1E1E1E;color:#D4D4D4;" tabindex="0"><code><span class="line"><span style="color:#F44747;">!</span><span style="color:#D4D4D4;">ls -l data</span></span>
<span class="line"><span style="color:#F44747;">!</span><span style="color:#D4D4D4;">echo  </span><span style="color:#CE9178;">&quot;--------------------------&quot;</span></span>
<span class="line"><span style="color:#F44747;">!</span><span style="color:#D4D4D4;">ls -l data/train</span></span>
<span class="line"><span style="color:#F44747;">!</span><span style="color:#D4D4D4;">echo  </span><span style="color:#CE9178;">&quot;------------- wav.scp file -------------&quot;</span></span>
<span class="line"><span style="color:#F44747;">!</span><span style="color:#D4D4D4;">head -n </span><span style="color:#B5CEA8;">10</span><span style="color:#D4D4D4;"> data/train/wav.scp</span></span>
<span class="line"><span style="color:#F44747;">!</span><span style="color:#D4D4D4;">echo  </span><span style="color:#CE9178;">&quot;------------- Segment file -------------&quot;</span></span>
<span class="line"><span style="color:#F44747;">!</span><span style="color:#D4D4D4;">head -n </span><span style="color:#B5CEA8;">10</span><span style="color:#D4D4D4;"> data/train/segments</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>#Questions:</p><p><strong>Q1: The format itself is very general. But it cannot fit to all the tasks in speech processing. Could you list three tasks where the current format cannot be sufficient?</strong></p><p><em>Your Answers here</em></p><p><strong>Q2: For the three tasks you listed above, can you think of some modification or addition to the format to make it also working for the tasks?</strong></p><p><em>Your Answers here</em></p><p><strong>Q3: Briefly discuss the difference within the <code>wav.scp</code> between <code>an4</code> and <code>totonac</code></strong></p><p><em>Your Answers here</em></p><p>(Note that for this assignment, you do not need to submit anything.)</p>`,66);function f(g,k){const e=o("ExternalLinkIcon");return t(),i("div",null,[c,d,u,s("ul",null,[s("li",null,[s("a",h,[a("ESPnet repository"),n(e)])]),s("li",null,[s("a",D,[a("ESPnet documentation"),n(e)])]),s("li",null,[s("a",m,[a("ESPnet tutorial in Speech Recognition and Understanding (Fall 2021)"),n(e)])]),s("li",null,[s("a",y,[a("Recitation in Multilingual NLP (Spring 2022)"),n(e)])]),s("li",null,[s("a",v,[a("ESPnet tutorail in Speech Recognition and Understanding (Fall 2022)"),n(e)])])]),b])}const C=l(r,[["render",f],["__file","DataPreparation_CMU_11492_692_Spring2023(Assignment0).html.vue"]]);export{C as default};
